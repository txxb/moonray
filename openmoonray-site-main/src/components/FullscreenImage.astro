---
const { src, alt, caption, width } = Astro.props;
---
<script type="module">
  document.querySelectorAll('.fullscreen-trigger').forEach((img) => {
    img.addEventListener('click', () => {
      const overlay = img.closest('.fullscreen-wrapper').querySelector('.fullscreen-overlay');
      const fullImg = overlay.querySelector('.fullscreen-image');
      const fullCaption = overlay.querySelector('.fullscreen-caption');

      fullImg.src = img.src;
      fullCaption.textContent = img.alt;
      overlay.classList.remove('hidden');
    });
  });

  document.querySelectorAll('.fullscreen-overlay').forEach((overlay) => {
    const closeBtn = overlay.querySelector('.fullscreen-close');
    const fullImg = overlay.querySelector('.fullscreen-image');

    closeBtn.addEventListener('click', () => {
      overlay.classList.add('hidden');
    });

    overlay.addEventListener('click', (e) => {
      if (!fullImg.contains(e.target)) {
        overlay.classList.add('hidden');
      }
    });
  });
</script>

 <div class="fullscreen-wrapper">
   <div class="flex justify-center p-6">
     <div class="group text-center"> 
      <img src={src} alt={alt} class={`fullscreen-trigger ${width} h-64 object-cover rounded-lg cursor-pointer transition-transform transform hover:scale-105`} /> 
    </div> </div> <div class="fullscreen-overlay fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center hidden z-50"> <div class="relative w-full h-full flex flex-col justify-center items-center"> <img class="fullscreen-image max-h-full max-w-full object-contain" alt="Fullscreen Image"> <p class="fullscreen-caption text-white text-center mt-4"></p> <button class="fullscreen-close absolute top-4 right-4 text-white text-3xl font-bold">&#88;</button> </div> </div> </div>